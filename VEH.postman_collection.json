{
  "info": {
    "_postman_id": "6eb266fb-9220-4a5e-835f-f1bea3d66dcc",
    "name": "VEH",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "24414357"
  },
  "item": [
    {
      "name": "Authentification",
      "item": [
        {
          "name": "Login - Admin",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "graphql",
              "graphql": {
                "query": "mutation {\n  login(email: \"admin@example.com\", password: \"admin123\") {\n    token\n    success\n    message\n  }\n}",
                "variables": ""
              }
            },
            "url": {
              "raw": "http://localhost:8000/graphql/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["graphql", ""]
            },
            "description": "Connexion en tant qu'administrateur pour obtenir le token JWT"
          }
        }
      ]
    },
    {
      "name": "Utilisateurs",
      "item": [
        {
          "name": "CreateUser - Admin",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "JWT {{admin_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "graphql",
              "graphql": {
                "query": "mutation {\n  createUser(input: {\n    email: \"admin@example.com\"\n    password: \"admin123\"\n    role: \"admin\"\n    firstName: \"Admin\"\n    lastName: \"User\"\n  }) {\n    user {\n      id\n      mongoId\n      email\n      role\n      firstName\n      lastName\n    }\n    success\n    message\n  }\n}",
                "variables": ""
              }
            },
            "url": {
              "raw": "http://localhost:8000/graphql/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["graphql", ""]
            },
            "description": "Créer l'utilisateur admin (comme dans seed_data.py)"
          }
        },
        {
          "name": "CreateUser - Player1",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "JWT {{admin_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "graphql",
              "graphql": {
                "query": "mutation {\n  createUser(input: {\n    email: \"player1@example.com\"\n    password: \"player123\"\n    role: \"player\"\n    firstName: \"Alice\"\n    lastName: \"Joueur\"\n  }) {\n    user {\n      id\n      mongoId\n      email\n      role\n      firstName\n      lastName\n    }\n    success\n    message\n  }\n}",
                "variables": ""
              }
            },
            "url": {
              "raw": "http://localhost:8000/graphql/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["graphql", ""]
            },
            "description": "Créer le joueur 1 - Alice"
          }
        },
        {
          "name": "CreateUser - Player2",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "JWT {{admin_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "graphql",
              "graphql": {
                "query": "mutation {\n  createUser(input: {\n    email: \"player2@example.com\"\n    password: \"player123\"\n    role: \"player\"\n    firstName: \"Bob\"\n    lastName: \"Joueur\"\n  }) {\n    user {\n      id\n      mongoId\n      email\n      role\n      firstName\n      lastName\n    }\n    success\n    message\n  }\n}",
                "variables": ""
              }
            },
            "url": {
              "raw": "http://localhost:8000/graphql/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["graphql", ""]
            },
            "description": "Créer le joueur 2 - Bob"
          }
        }
      ]
    },
    {
      "name": "Scénario - Le Château Oublié",
      "item": [
        {
          "name": "CreateScenario - Le Château Oublié",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "JWT {{admin_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "graphql",
              "graphql": {
                "query": "mutation {\n  createScenario(input: {\n    title: \"Le Château Oublié\"\n    description: \"Une aventure épique dans les ruines d'un ancien château rempli de mystères\"\n    isPublished: true\n  }) {\n    scenario {\n      id\n      mongoId\n      title\n      description\n      isPublished\n    }\n    success\n    message\n  }\n}",
                "variables": ""
              }
            },
            "url": {
              "raw": "http://localhost:8000/graphql/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["graphql", ""]
            },
            "description": "Créer le scénario principal 'Le Château Oublié'"
          }
        },
        {
          "name": "CreateScene - 1. L'entrée du château",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "JWT {{admin_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "graphql",
              "graphql": {
                "query": "mutation {\n  createScene(input: {\n    scenarioId: \"{{scenario_id}}\"\n    title: \"L'entrée du château\"\n    text: \"Vous vous trouvez devant les ruines d'un ancien château. Les murs de pierre sont recouverts de lierre et de mousse. Une grande porte en bois se dresse devant vous, partiellement ouverte.\"\n    order: 1\n    isStartScene: true\n    isEndScene: false\n  }) {\n    scene {\n      id\n      mongoId\n      title\n      text\n      order\n      isStartScene\n      isEndScene\n    }\n    success\n    message\n  }\n}",
                "variables": ""
              }
            },
            "url": {
              "raw": "http://localhost:8000/graphql/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["graphql", ""]
            },
            "description": "Scène de début - L'entrée du château"
          }
        },
        {
          "name": "CreateScene - 2. Le grand hall",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "JWT {{admin_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "graphql",
              "graphql": {
                "query": "mutation {\n  createScene(input: {\n    scenarioId: \"{{scenario_id}}\"\n    title: \"Le grand hall\"\n    text: \"Vous pénétrez dans un vaste hall aux plafonds voûtés. Des torches vacillantes projettent des ombres dansantes sur les murs de pierre. Des statues de chevaliers semblent vous observer depuis les recoins.\"\n    order: 2\n    isStartScene: false\n    isEndScene: false\n  }) {\n    scene {\n      id\n      mongoId\n      title\n      text\n      order\n      isStartScene\n      isEndScene\n    }\n    success\n    message\n  }\n}",
                "variables": ""
              }
            },
            "url": {
              "raw": "http://localhost:8000/graphql/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["graphql", ""]
            },
            "description": "Scène 2 - Le grand hall"
          }
        },
        {
          "name": "CreateScene - 3. Les donjons souterrains",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "JWT {{admin_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "graphql",
              "graphql": {
                "query": "mutation {\n  createScene(input: {\n    scenarioId: \"{{scenario_id}}\"\n    title: \"Les donjons souterrains\"\n    text: \"Vous descendez un escalier de pierre étroit et humide. L'air est froid et chargé d'humidité. Des gouttes d'eau résonnent dans l'obscurité, créant une atmosphère oppressante.\"\n    order: 3\n    isStartScene: false\n    isEndScene: false\n  }) {\n    scene {\n      id\n      mongoId\n      title\n      text\n      order\n      isStartScene\n      isEndScene\n    }\n    success\n    message\n  }\n}",
                "variables": ""
              }
            },
            "url": {
              "raw": "http://localhost:8000/graphql/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["graphql", ""]
            },
            "description": "Scène 3 - Les donjons souterrains"
          }
        },
        {
          "name": "CreateScene - 4. La bibliothèque secrète",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "JWT {{admin_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "graphql",
              "graphql": {
                "query": "mutation {\n  createScene(input: {\n    scenarioId: \"{{scenario_id}}\"\n    title: \"La bibliothèque secrète\"\n    text: \"Vous découvrez une bibliothèque secrète remplie de livres anciens. Des rayons de lumière filtrant par les fenêtres éclairent des étagères poussiéreuses. Des grimoires aux couvertures dorées semblent appeler votre attention.\"\n    order: 4\n    isStartScene: false\n    isEndScene: false\n  }) {\n    scene {\n      id\n      mongoId\n      title\n      text\n      order\n      isStartScene\n      isEndScene\n    }\n    success\n    message\n  }\n}",
                "variables": ""
              }
            },
            "url": {
              "raw": "http://localhost:8000/graphql/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["graphql", ""]
            },
            "description": "Scène 4 - La bibliothèque secrète"
          }
        },
        {
          "name": "CreateScene - 5. La salle du trône",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "JWT {{admin_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "graphql",
              "graphql": {
                "query": "mutation {\n  createScene(input: {\n    scenarioId: \"{{scenario_id}}\"\n    title: \"La salle du trône\"\n    text: \"Vous pénétrez dans une immense salle du trône. Un trône en pierre imposant domine la pièce, entouré de bannières anciennes qui flottent dans l'air. Des échos lointains résonnent, créant une atmosphère à la fois majestueuse et inquiétante.\"\n    order: 5\n    isStartScene: false\n    isEndScene: true\n  }) {\n    scene {\n      id\n      mongoId\n      title\n      text\n      order\n      isStartScene\n      isEndScene\n    }\n    success\n    message\n  }\n}",
                "variables": ""
              }
            },
            "url": {
              "raw": "http://localhost:8000/graphql/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["graphql", ""]
            },
            "description": "Scène de fin - La salle du trône"
          }
        }
      ]
    },
    {
      "name": "Choix (Choices)",
      "item": [
        {
          "name": "CreateChoice - Entrée → Grand hall",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "JWT {{admin_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "graphql",
              "graphql": {
                "query": "mutation {\n  createChoice(input: {\n    fromSceneId: \"{{scene_1_id}}\"\n    toSceneId: \"{{scene_2_id}}\"\n    text: \"Pénétrer dans le grand hall\"\n    order: 1\n  }) {\n    choice {\n      id\n      mongoId\n      text\n      order\n      fromSceneId {\n        mongoId\n        title\n      }\n      toSceneId {\n        mongoId\n        title\n      }\n    }\n    success\n    message\n  }\n}",
                "variables": ""
              }
            },
            "url": {
              "raw": "http://localhost:8000/graphql/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["graphql", ""]
            },
            "description": "Choice depuis l'entrée vers le grand hall"
          }
        },
        {
          "name": "CreateChoice - Entrée → Donjons",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "JWT {{admin_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "graphql",
              "graphql": {
                "query": "mutation {\n  createChoice(input: {\n    fromSceneId: \"{{scene_1_id}}\"\n    toSceneId: \"{{scene_3_id}}\"\n    text: \"Explorer les donjons\"\n    order: 2\n  }) {\n    choice {\n      id\n      mongoId\n      text\n      order\n      fromSceneId {\n        mongoId\n        title\n      }\n      toSceneId {\n        mongoId\n        title\n      }\n    }\n    success\n    message\n  }\n}",
                "variables": ""
              }
            },
            "url": {
              "raw": "http://localhost:8000/graphql/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["graphql", ""]
            },
            "description": "Choice depuis l'entrée vers les donjons"
          }
        },
        {
          "name": "CreateChoice - Grand hall → Bibliothèque",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "JWT {{admin_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "graphql",
              "graphql": {
                "query": "mutation {\n  createChoice(input: {\n    fromSceneId: \"{{scene_2_id}}\"\n    toSceneId: \"{{scene_4_id}}\"\n    text: \"Chercher une bibliothèque\"\n    order: 1\n  }) {\n    choice {\n      id\n      mongoId\n      text\n      order\n      fromSceneId {\n        mongoId\n        title\n      }\n      toSceneId {\n        mongoId\n        title\n      }\n    }\n    success\n    message\n  }\n}",
                "variables": ""
              }
            },
            "url": {
              "raw": "http://localhost:8000/graphql/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["graphql", ""]
            },
            "description": "Choice depuis le grand hall vers la bibliothèque"
          }
        },
        {
          "name": "CreateChoice - Donjons → Salle du trône",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "JWT {{admin_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "graphql",
              "graphql": {
                "query": "mutation {\n  createChoice(input: {\n    fromSceneId: \"{{scene_3_id}}\"\n    toSceneId: \"{{scene_5_id}}\"\n    text: \"Remonter vers la salle du trône\"\n    order: 1\n  }) {\n    choice {\n      id\n      mongoId\n      text\n      order\n      fromSceneId {\n        mongoId\n        title\n      }\n      toSceneId {\n        mongoId\n        title\n      }\n    }\n    success\n    message\n  }\n}",
                "variables": ""
              }
            },
            "url": {
              "raw": "http://localhost:8000/graphql/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["graphql", ""]
            },
            "description": "Choice depuis les donjons vers la salle du trône"
          }
        },
        {
          "name": "CreateChoice - Bibliothèque → Salle du trône",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "JWT {{admin_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "graphql",
              "graphql": {
                "query": "mutation {\n  createChoice(input: {\n    fromSceneId: \"{{scene_4_id}}\"\n    toSceneId: \"{{scene_5_id}}\"\n    text: \"Sortir vers la salle du trône\"\n    order: 1\n  }) {\n    choice {\n      id\n      mongoId\n      text\n      order\n      fromSceneId {\n        mongoId\n        title\n      }\n      toSceneId {\n        mongoId\n        title\n      }\n    }\n    success\n    message\n  }\n}",
                "variables": ""
              }
            },
            "url": {
              "raw": "http://localhost:8000/graphql/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["graphql", ""]
            },
            "description": "Choice depuis la bibliothèque vers la salle du trône"
          }
        }
      ]
    },
    {
      "name": "Progressions",
      "item": [
        {
          "name": "CreateProgress - Player1",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "JWT {{admin_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "graphql",
              "graphql": {
                "query": "mutation {\n  createProgress(input: {\n    scenarioId: \"{{scenario_id}}\"\n    currentSceneId: \"{{scene_1_id}}\"\n  }) {\n    progress {\n      id\n      mongoId\n      scenarioId {\n        mongoId\n        title\n      }\n      currentSceneId {\n        mongoId\n        title\n      }\n      userId {\n        mongoId\n        email\n      }\n      progressPercentage\n      totalTimeSpent\n    }\n    success\n    message\n  }\n}",
                "variables": ""
              }
            },
            "url": {
              "raw": "http://localhost:8000/graphql/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["graphql", ""]
            },
            "description": "Créer une progression pour player1 (Alice) - commence à la scène de début"
          }
        },
        {
          "name": "CreateProgress - Player2",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "JWT {{admin_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "graphql",
              "graphql": {
                "query": "mutation {\n  createProgress(input: {\n    scenarioId: \"{{scenario_id}}\"\n    currentSceneId: \"{{scene_1_id}}\"\n  }) {\n    progress {\n      id\n      mongoId\n      scenarioId {\n        mongoId\n        title\n      }\n      currentSceneId {\n        mongoId\n        title\n      }\n      userId {\n        mongoId\n        email\n      }\n      progressPercentage\n      totalTimeSpent\n    }\n    success\n    message\n  }\n}",
                "variables": ""
              }
            },
            "url": {
              "raw": "http://localhost:8000/graphql/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["graphql", ""]
            },
            "description": "Créer une progression pour player2 (Bob) - commence à la scène de début"
          }
        }
      ]
    },
    {
      "name": "Requêtes de lecture",
      "item": [
        {
          "name": "GetAllScenarios",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "JWT {{admin_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "graphql",
              "graphql": {
                "query": "query {\n  allScenarios {\n    id\n    mongoId\n    title\n    description\n    isPublished\n    scenes {\n      id\n      mongoId\n      title\n      order\n      isStartScene\n      isEndScene\n    }\n  }\n}",
                "variables": ""
              }
            },
            "url": {
              "raw": "http://localhost:8000/graphql/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["graphql", ""]
            },
            "description": "Récupérer tous les scénarios"
          }
        },
        {
          "name": "GetMyProgress",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "JWT {{player_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "graphql",
              "graphql": {
                "query": "query {\n  myProgress {\n    id\n    mongoId\n    scenarioId {\n      id\n      mongoId\n      title\n    }\n    currentSceneId {\n      id\n      mongoId\n      title\n      text\n      order\n    }\n    progressPercentage\n    totalTimeSpent\n  }\n}",
                "variables": ""
              }
            },
            "url": {
              "raw": "http://localhost:8000/graphql/",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8000",
              "path": ["graphql", ""]
            },
            "description": "Récupérer la progression du joueur connecté"
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "admin_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "player_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "scenario_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "scene_1_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "scene_2_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "scene_3_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "scene_4_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "scene_5_id",
      "value": "",
      "type": "string"
    }
  ]
}
